<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profile • Path2Hire</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    /* 1. Tailwind config extensions */
    :root{
      --color-primary:#2563eb;
      --color-secondary:#1e40af;
      --color-accent:#f9a826;
    }
    /* 2. small custom helpers */
    .modal{position:fixed;inset:0;z-index:50;display:none;place-items:center;background:rgba(0,0,0,.55)}
    .modal.show{display:grid}
    .tab-content{display:none}
    .tab-content.block{display:block}
    .tab-button.active{background:var(--color-primary);color:#fff}
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

<!-- ========= 1.  NAVBAR ========= -->
<nav class="fixed top-0 w-full bg-white shadow-md z-40">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center">
      <!-- logo -->
      <a href="/" class="flex items-center space-x-2">
        <div class="h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center"><i class="fas fa-graduation-cap text-white"></i></div>
        <span class="text-xl font-bold text-blue-600">Path2<span class="text-yellow-500">Hire</span></span>
      </a>

      <!-- centre links -->
      <div class="hidden md:flex space-x-6 text-sm font-medium">
        <a href="/" class="text-gray-500 hover:text-gray-700">Home</a>
        <a href="/about.html" class="text-gray-500 hover:text-gray-700">About</a>
        <a href="/assessment" class="text-gray-500 hover:text-gray-700">Assessment</a>
        <a href="/jobs" class="text-gray-500 hover:text-gray-700">Jobs</a>
        <a href="/contact.html" class="text-gray-500 hover:text-gray-700">Contact</a>
      </div>
      <div class="md:hidden">
        <button id="menuBtn" class="focus:outline-none"><i class="fas fa-bars text-2xl text-primary"></i></button>
      </div>
      <div class="hidden md:flex space-x-4">
        <a href="../login.html" class="btn-primary bg-primary hover:bg-secondary text-white px-4 py-2 rounded-full text-sm font-medium flex items-center">
          <i class="fas fa-user-graduate mr-2"></i>Student Portal
        </a>
        <a href="./career.html" class="btn-primary bg-primary hover:bg-secondary text-white px-4 py-2 rounded-full text-sm font-medium flex items-center">
          <i class="fas fa-briefcase mr-2"></i>Career Portal
        </a>
        <a href="./profile.html" class="btn-primary bg-accent hover:bg-yellow-500 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center">
          <i class="fas fa-user mr-2"></i>Profile
        </a>
      </div>

      <!-- right side -->
      <div class="flex items-center space-x-4">
        <img src="https://ui-avatars.com/api/?name={{ user_info.name|urlencode }}&background=2563eb&color=fff" class="w-8 h-8 rounded-full" alt="avatar">
        <span class="text-sm font-medium text-gray-700">{{ user_info.name or 'User' }}</span>
        <a href="/logout" class="text-gray-500 hover:text-gray-700"><i class="fas fa-sign-out-alt"></i></a>
      </div>
    </div>
  </div>
</nav>

<!-- ========= 2.  HERO / HEADER ========= -->
<section class="pt-24 pb-10 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 text-white">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex flex-col md:flex-row items-center gap-8">
      <!-- left : avatar -->
      <div class="relative shrink-0">
        <img src="https://ui-avatars.com/api/?name={{ user_info.name|urlencode }}&background=f9a826&color=fff&size=150"
             class="w-32 h-32 rounded-full border-4 border-white shadow-xl" alt="Profile">
        <button onclick="openModal('photoModal')" class="absolute bottom-2 right-2 bg-yellow-500 hover:bg-yellow-400 text-white rounded-full p-2 shadow"><i class="fas fa-camera text-sm"></i></button>
      </div>

      <!-- centre : name + contact -->
      <div class="md:flex-1 text-center md:text-left">
        <h1 class="text-4xl font-bold mb-1">{{ user_info.name or 'User' }}</h1>
        <p class="text-blue-100 mb-3">
          {% if latest_results and latest_results.strongest %}
            {% set role_map={'FAR':'Financial Analysis Professional','BM':'Business Management Specialist','CRM':'Customer Relations Expert','MO':'Operations & Management Leader'} %}
            {{ role_map.get(latest_results.strongest,'Path2Hire Student') }}
          {% else %}Path2Hire Student{% endif %}
        </p>
        <div class="flex flex-wrap justify-center md:justify-start gap-3 text-xs">
          <span class="bg-white/20 backdrop-blur px-3 py-1 rounded-full"><i class="fas fa-envelope mr-2"></i>{{ user_info.email or 'user@email.com' }}</span>
          {% if user_data.phone %}<span class="bg-white/20 backdrop-blur px-3 py-1 rounded-full"><i class="fas fa-phone mr-2"></i>{{ user_data.phone }}</span>{% endif %}
          {% if user_data.address %}<span class="bg-white/20 backdrop-blur px-3 py-1 rounded-full"><i class="fas fa-map-marker-alt mr-2"></i>{{ user_data.address }}</span>{% endif %}
        </div>

        <!-- CTA buttons -->
        <div class="mt-5 flex flex-wrap gap-3 justify-center md:justify-start">
          <button onclick="openModal('editProfileModal')" class="bg-white/20 hover:bg-white/30 px-5 py-2 rounded-full border border-white/30 backdrop-blur transition"><i class="fas fa-edit mr-2"></i>Edit Profile</button>
          <button onclick="openModal('settingsModal')" class="bg-yellow-500 hover:bg-yellow-400 px-5 py-2 rounded-full text-white transition"><i class="fas fa-cog mr-2"></i>Settings</button>
        </div>
      </div>

      <!-- right : big % ring -->
      <div class="shrink-0 text-center">
        <div class="text-5xl font-extrabold text-yellow-300">{{ profile_completion or 60 }}%</div>
        <p class="text-sm text-blue-100">Profile Complete</p>
      </div>
    </div>
  </div>
</section>

<!-- ========= 3.  STICKY TABS ========= -->
<section class="bg-white shadow-sm sticky top-16 z-30">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex border-b">
      <button onclick="switchTab('overview')" class="tab-button active px-5 py-3 text-sm font-medium border-b-2 border-transparent">Overview</button>
      <button onclick="switchTab('assessment')" class="tab-button px-5 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-800">Assessment Results</button>
      <button onclick="switchTab('achievements')" class="tab-button px-5 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-800">Achievements</button>
      <button onclick="switchTab('performance')" class="tab-button px-5 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-800">Performance</button>
    </div>
  </div>
</section>

<!-- ========= 4.  TAB PANES ========= -->
<main class="max-w-7xl mx-auto px-4 py-8 grid gap-8">
  <!-- ---- Overview ---- -->
  <div id="overview" class="tab-content block">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-8">
      <metric-card icon="fas fa-clipboard-check" value="{{ total_attempts or 0 }}" label="Total Assessments" color="blue"></metric-card>
      <metric-card icon="fas fa-star" value="{% if latest_results and latest_results.scores %}{{ ((latest_results.scores[latest_results.strongest or 'FAR']/(latest_results.scores.values()|sum or 1)*100)|round|int) }}%{% else %}-{% endif %}" label="Latest Score" color="yellow"></metric-card>
      <metric-card icon="fas fa-user-check" value="{{ profile_completion or 60 }}%" label="Profile Complete" color="green"></metric-card>
      <metric-card icon="fas fa-calendar" value="{{ join_date[:4] if join_date else '2024' }}" label="Member Since" color="purple"></metric-card>
    </div>

    <!-- Recent Activity -->
    <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow">
      <h3 class="text-lg font-bold text-gray-800 mb-4">Recent Activity</h3>
      {% if attempts_history %}
        <div class="space-y-3">
          {% for attempt in attempts_history[:3] %}
          <div class="flex items-center gap-4 p-3 bg-white rounded-xl shadow-sm">
            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white"><i class="fas fa-clipboard-check"></i></div>
            <div class="flex-1"><p class="font-semibold text-gray-800">Assessment Completed</p><p class="text-xs text-gray-500">Strong in: {{ attempt.results.strongest if attempt.results else 'Unknown' }}</p></div>
            <span class="text-xs text-gray-400">{{ attempt.submitted_at[:10] if attempt.submitted_at else 'Recent' }}</span>
          </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="text-center py-6 text-gray-500">No assessment history yet.<br><a href="/assessment" class="text-primary hover:underline">Take your first assessment</a></div>
      {% endif %}
    </div>
  </div><!-- /overview -->

  <!-- ---- Assessment Results ---- -->
  <div id="assessment" class="tab-content">
    {% if latest_results %}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow">
        <h3 class="text-lg font-bold mb-4">Latest Results</h3>
        {% set catNames={'FAR':'Financial & Analytical','BM':'Business & Market','CRM':'Customer Relations','MO':'Motivation & Operations'} %}
        {% set total=latest_results.scores.values()|sum %}
        {% for code,score in latest_results.scores.items() %}
        <div class="mb-4 p-4 bg-white rounded-xl shadow-sm">
          <div class="flex justify-between items-center mb-2"><h4 class="font-semibold">{{ catNames.get(code,code) }}</h4><span class="text-sm font-bold text-primary">{{ score }} Q</span></div>
          <div class="bg-gray-200 rounded-full h-2 mb-1"><div class="bg-primary h-2 rounded-full" style="width:{{ ((score/total)*100)|round|int }}%"></div></div>
          <p class="text-xs text-gray-500">{{ ((score/total)*100)|round|int }}% of your answers</p>
        </div>
        {% endfor %}
      </div>
      <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow">
        <h3 class="text-lg font-bold mb-4">Career Recommendations</h3>
        {% if latest_results.strongest=='FAR' %}
        <div class="p-4 border-l-4 border-blue-500 bg-blue-50 rounded"><h4 class="font-semibold text-blue-700 mb-1">Financial Analyst Path</h4><p class="text-sm text-gray-700">Your analytical strengths suggest roles in financial planning, investment analysis, or corporate finance.</p></div>
        {% elif latest_results.strongest=='BM' %}
        <div class="p-4 border-l-4 border-yellow-500 bg-yellow-50 rounded"><h4 class="font-semibold text-yellow-700 mb-1">Business Management Path</h4><p class="text-sm text-gray-700">Strong business acumen indicates leadership, consulting, or strategic-planning positions.</p></div>
        {% elif latest_results.strongest=='CRM' %}
        <div class="p-4 border-l-4 border-green-500 bg-green-50 rounded"><h4 class="font-semibold text-green-700 mb-1">Customer Relations Path</h4><p class="text-sm text-gray-700">Communication strength points to client-management, sales, or customer-success roles.</p></div>
        {% elif latest_results.strongest=='MO' %}
        <div class="p-4 border-l-4 border-purple-500 bg-purple-50 rounded"><h4 class="font-semibold text-purple-700 mb-1">Operations Leadership Path</h4><p class="text-sm text-gray-700">Operational focus hints at project-management, process-improvement, or ops-leadership roles.</p></div>
        {% endif %}
        <div class="mt-5 flex gap-3">
          <a href="/results" class="bg-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition">Detailed Results</a>
          <a href="/assessment" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm hover:bg-gray-300 transition">Retake</a>
        </div>
      </div>
    </div>
    {% else %}
    <div class="text-center py-12 text-gray-500"><i class="fas fa-clipboard-list text-5xl mb-4"></i><h3 class="text-xl font-bold mb-2">No Assessment Results Yet</h3><p>Take your first career assessment to discover your strengths.</p><a href="/assessment" class="mt-4 inline-block bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">Start Assessment</a></div>
    {% endif %}
  </div><!-- /assessment -->

  <!-- ---- Achievements ---- -->
  <div id="achievements" class="tab-content">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow">
        <h3 class="text-lg font-bold mb-4">Your Achievements</h3>
        <div class="grid grid-cols-2 gap-4">
          {% if total_attempts > 0 %}<achievement-badge icon="fas fa-clipboard-check" title="Assessment Complete" subtitle="Completed career assessment" color="blue"></achievement-badge>{% endif %}
          {% if profile_completion >= 80 %}<achievement-badge icon="fas fa-user-check" title="Profile Master" subtitle="Completed profile information" color="green"></achievement-badge>{% endif %}
          <achievement-badge icon="fas fa-lock" title="Course Complete" subtitle="Complete a training course" color="gray" locked></achievement-badge>
          <achievement-badge icon="fas fa-lock" title="Career Expert" subtitle="Complete multiple assessments" color="gray" locked></achievement-badge>
        </div>
      </div>
      <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow">
        <h3 class="text-lg font-bold mb-4">Progress Tracking</h3>
        <progress-bar label="Profile Completion" value="{{ profile_completion or 60 }}" color="blue"></progress-bar>
        <progress-bar label="Assessment Progress" value="{{ [total_attempts * 25, 100]|min }}" color="green" class="mt-4"></progress-bar>
      </div>
    </div>
  </div><!-- /achievements -->

  <!-- ---- Performance ---- -->
  <div id="performance" class="tab-content">
    {% if attempts_history %}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow">
        <h3 class="text-lg font-bold mb-4">Assessment History</h3>
        <div class="space-y-4">
          {% for attempt in attempts_history %}
          <div class="p-4 bg-white rounded-xl shadow-sm">
            <div class="flex justify-between items-center mb-2"><h4 class="font-semibold">Assessment #{{ loop.index }}</h4>{% if attempt.results and attempt.results.strongest %}<span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full">{{ attempt.results.strongest }}</span>{% endif %}</div>
            {% if attempt.results and attempt.results.scores %}
            <div class="space-y-1 text-sm">
              {% set total=attempt.results.scores.values()|sum %}
              {% for code,score in attempt.results.scores.items() %}<div class="flex justify-between"><span>{{ code }}</span><span>{{ ((score/total)*100)|round|int }}%</span></div>{% endfor %}
            </div>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
      <div class="space-y-6">
        <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow text-center">
          <div class="text-4xl font-bold text-primary mb-1">{{ total_attempts }}</div>
          <p class="text-gray-600">Total Assessments</p>
          <div class="grid grid-cols-2 gap-4 mt-4">
            <div><div class="text-2xl font-bold text-gray-700">{{ join_date[:4] if join_date else '2024' }}</div><p class="text-xs text-gray-500">Member Since</p></div>
            <div><div class="text-2xl font-bold text-gray-700">{{ profile_completion or 60 }}%</div><p class="text-xs text-gray-500">Profile Complete</p></div>
          </div>
        </div>
        {% if latest_results and latest_results.strongest %}
        <div class="bg-white/70 backdrop-blur rounded-2xl p-6 shadow text-center">
          <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-3 text-white text-2xl"><i class="fas fa-star"></i></div>
          <h5 class="font-semibold text-gray-800">
            {% if latest_results.strongest=='FAR' %}Financial Analysis{% elif latest_results.strongest=='BM' %}Business Management{% elif latest_results.strongest=='CRM' %}Customer Relations{% elif latest_results.strongest=='MO' %}Operations Focus{% endif %}
          </h5>
          <p class="text-sm text-gray-600">Strongest area (latest assessment)</p>
        </div>
        {% endif %}
      </div>
    </div>
    {% else %}
    <div class="text-center py-12 text-gray-500"><i class="fas fa-chart-line text-5xl mb-4"></i><h3 class="text-xl font-bold mb-2">No Performance Data Yet</h3><p>Complete assessments to track performance over time.</p><a href="/assessment" class="mt-4 inline-block bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">Take Assessment</a></div>
    {% endif %}
  </div><!-- /performance -->
</main>

<!-- ========= 5.  MODALS ========= -->
<!-- (1) Edit Profile  -->
<div id="editProfileModal" class="modal">
  <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-gray-800">Edit Profile</h2>
      <button onclick="closeModal('editProfileModal')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
    </div>
    <form id="profileForm" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
          <input type="text" name="first_name" value="{{ user_data.first_name or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
          <input type="text" name="last_name" value="{{ user_data.last_name or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
        <input type="tel" name="phone" value="{{ user_data.phone or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
        <textarea name="address" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">{{ user_data.address or '' }}</textarea>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
          <input type="date" name="date_of_birth" value="{{ user_data.date_of_birth or '' }}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
          <select name="gender" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="">Select Gender</option>
            <option value="Male" {% if user_data.gender=='Male' %}selected{% endif %}>Male</option>
            <option value="Female" {% if user_data.gender=='Female' %}selected{% endif %}>Female</option>
            <option value="Other" {% if user_data.gender=='Other' %}selected{% endif %}>Other</option>
            <option value="Prefer not to say" {% if user_data.gender=='Prefer not to say' %}selected{% endif %}>Prefer not to say</option>
          </select>
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Bio</label>
        <textarea name="bio" rows="4" placeholder="Tell us about yourself…" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">{{ user_data.bio or '' }}</textarea>
      </div>
      <div class="flex justify-end gap-3">
        <button type="button" onclick="closeModal('editProfileModal')" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">Cancel</button>
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">Save Changes</button>
      </div>
    </form>
  </div>
</div>

<!-- (2) Settings  -->
<div id="settingsModal" class="modal">
  <div class="bg-white rounded-2xl max-w-2xl w-full p-6">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-gray-800">Account Settings</h2>
      <button onclick="closeModal('settingsModal')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
    </div>
    <div class="space-y-3 text-sm">
      <a href="/assessment" class="flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50"><div><p class="font-medium text-gray-700">Retake Assessment</p><p class="text-gray-500">Get updated career recommendations</p></div><i class="fas fa-chevron-right text-gray-400"></i></a>
      <a href="/results" class="flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50"><div><p class="font-medium text-gray-700">View Results</p><p class="text-gray-500">See your latest assessment results</p></div><i class="fas fa-chevron-right text-gray-400"></i></a>
      <a href="/logout" class="flex items-center justify-between p-3 border border-red-200 rounded-lg hover:bg-red-50 text-red-600"><div><p class="font-medium">Sign Out</p><p class="text-gray-500">Sign out of your account</p></div><i class="fas fa-sign-out-alt"></i></a>
    </div>
    <div class="flex justify-end mt-6"><button onclick="closeModal('settingsModal')" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">Close</button></div>
  </div>
</div>

<!-- (3) Photo  -->
<div id="photoModal" class="modal">
  <div class="bg-white rounded-2xl max-w-md w-full p-6 text-center">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-gray-800">Update Profile Photo</h2>
      <button onclick="closeModal('photoModal')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
    </div>
    <img src="https://ui-avatars.com/api/?name={{ user_info.name|urlencode }}&background=f9a826&color=fff&size=150" class="w-32 h-32 rounded-full mx-auto mb-4" alt="current">
    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 mb-4"><i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"></i><p class="text-gray-600">Profile photos coming soon!</p><p class="text-xs text-gray-400">For now we use your initials</p></div>
    <div class="flex justify-end"><button onclick="closeModal('photoModal')" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">Close</button></div>
  </div>
</div>

<!-- ========= 6.  RE-USABLE WEB-COMPONENTS (pure html helpers) ========= -->
<template id="metric-card">
  <div class="bg-white/70 backdrop-blur rounded-2xl p-5 shadow flex items-center justify-between">
    <div><p class="text-gray-600 text-sm">{{ label }}</p><p class="text-3xl font-bold text-{{ color }}-600">{{ value }}</p></div>
    <div class="w-12 h-12 bg-gradient-to-r from-{{ color }}-500 to-{{ color }}-600 rounded-xl flex items-center justify-center text-white"><i class="{{ icon }}"></i></div>
  </div>
</template>

<script>
  /* ---------- helpers ---------- */
  function switchTab(tab){
    document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('block'));
    document.querySelectorAll('.tab-button').forEach(b=>b.classList.remove('active','text-gray-600','hover:text-gray-800'));
    document.getElementById(tab).classList.add('block');
    event.target.classList.add('active');
  }
  function openModal(id){document.getElementById(id).classList.add('show');document.body.style.overflow='hidden';}
  function closeModal(id){document.getElementById(id).classList.remove('show');document.body.style.overflow='auto';}
  // click-outside close
  document.querySelectorAll('.modal').forEach(m=>m.addEventListener('click',e=>{if(e.target===m){closeModal(m.id)}}));

  /* ---------- form submit ---------- */
  document.getElementById('profileForm')?.addEventListener('submit',function(e){
    e.preventDefault();
    fetch('/profile/update',{method:'POST',body:new FormData(this)})
      .then(r=>r.json()).then(d=>{
        if(d.success){location.reload();}else{alert('Error: '+d.error);}
      }).catch(err=>alert('Request failed'));
  });
</script>
</body>
</html>